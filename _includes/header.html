<header class="red relative full-width header-height wrapper-padding padding-0-lt-header text-left z-9" data-menu data-fixed-header>

  <nav id="site-nav" class="flex-row-gt-header full-size target">
    <div class="flex-row full-height wrapper-padding padding-0-gt-header">
      {% unless include.center %}
        <a class="flex-row flex-align-center margin-auto-r full-height padding-xxs-v subtle-icon" href="{{ site.baseurl }}/">
          <img class="full-height" src="{{ site.logo.basic }}" alt="">
          <span class="margin-s-l hide-lt-header">DSA Anti-War</span>
        </a>
      {% endunless %}

      <div class="hide-gt-header flex-row flex-align-center margin-auto-l full-height">
        <a href="#site-nav" class="target-hide v-center subtle-icon" data-menu-button="open">
          Menu <i class="fa fa-bars fa-fw fa-lg"></i>
        </a>
        <a href="#" class="target-display v-center subtle-icon" data-class-add="hidden" data-menu-button="close">
          Close <i class="fa fa-times fa-fw fa-lg"></i>
        </a>
      </div>
    </div>

    <div class="flex-row-gt-header {% unless include.center %} margin-auto-l {% else %} margin-auto-h {% endunless %} full-height target-max-height-expand theme-bg overflow-v overflow-h-lt-header t-default t-long" data-menu-links data-class-rm="t-long">
      {% for link in site.data.header %}
        {% if link.collection %}
          {% assign matches = site.documents | where: 'collection', link.collection %}
        {% elsif link.page %}
          {% assign matches = site.documents | where: 'path', link.page %}
        {% else %}
          {% assign matches = site.singleArray %}
        {% endif %}

        {% for match in matches %}
          {% if link.collection and link.text %}
            {% assign link_text = match[link.text] %}
          {% elsif link.collection %}
            {% assign link_text = match.title %}
          {% elsif link.text %}
            {% assign link_text = link.text %}
          {% endif %}

          {% if link.dropdown %}
          <div class="relative hover">
          {% endif %}

            <a class="block flex-row-gt-header flex-align-center full-height padding-s-h subtle-icon no-wrap {% unless link.dropdown %} hover {% endunless %} hover-shade hover-shade-dark-lt-header t-short cursor-pointer-gt-header" {% if match %} href="{{ match.url | prepend: site.baseurl }}" {% endif %} data-menu-link>
              {{ link_text }}
            </a>

            {% if link.dropdown %}
              <div class="absolute-gt-header pos-0-l pos-full-t full-width-min hover-display-gt-header" data-menu-dropdown>
                {% for sub_link in link.dropdown %}
                  {% for doc in site.documents %}
                    {% assign sub_match = nil %}
                    {% if sub_link.page == doc.path %}
                      {% assign sub_match = doc %}
                      {% break %}
                    {% endif %}
                  {% endfor %}

                  <a class="block flex-row-gt-header flex-align-center theme-bg header-height padding-s-h subtle-icon no-wrap hover hover-shade-dark t-short" {% if sub_match %} href="{{ sub_match.url | prepend: site.baseurl }}" {% endif %} data-menu-link>
                    {{ sub_link.text }}
                  </a>

                {% endfor %}
              </div>
            </div>
          {% endif %}
        {% endfor %}

      {% endfor %}

    </div>
  </nav>

</header>
